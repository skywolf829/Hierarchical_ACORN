<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Collapsible sidebar using Bootstrap 4</title>

    <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <!-- Our Custom CSS -->
    <link rel="stylesheet" href="/static/css/style.css">

    <!-- Font Awesome JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>

    <script>
        function get_target_signal(){
          $.ajax({
            url: "/get_target_signal",
            type: "get",
            success: function(response){

                var img = response['im']
                img = img.substring(2, img.length-1)

                document.getElementById('target_signal').src = "data:img/png;base64,"+img; 
            } 
          });
        }
        function reconstruct_target_signal(){
            $.ajax({
            url: "/reconstruct_target_signal",
            type: "get",
            success: function(response){

                var img = response['reconstructed_im']
                img = img.substring(2, img.length-1)

                document.getElementById('psnr').innerHTML = "PSNR: " + response['psnr'] + " dB";
                document.getElementById('reconstructed_signal').src = "data:img/png;base64,"+img; 
            } 
          });
        }
        function reconstruct_target_signal_blocks(){
            $.ajax({
            url: "/reconstruct_target_signal_blocks",
            type: "get",
            success: function(response){

                var img = response['reconstructed_im_blocks']
                img = img.substring(2, img.length-1)

                document.getElementById('reconstructed_signal_blocks').src = "data:img/png;base64,"+img; 
            } 
          });
        }
        function get_block_zoom(){
            $.ajax({
            url: "/get_block_zoom",
            type: "get",
            data: {
                x_click : 0,
                y_click : 0,
                zoom : document.getElementById('block_zoom_slider').value
            },
            success: function(response){

                var img = response['block_im']
                img = img.substring(2, img.length-1)

                document.getElementById('block_zoom').src = "data:img/png;base64,"+img; 
            } 
          });
        }
        function onstart(){
            get_target_signal();
            reconstruct_target_signal();
            reconstruct_target_signal_blocks();
            get_block_zoom();
        }
    </script>
</head>

<body onload="onstart()">
    <div class="wrapper">
        <!-- Sidebar  -->
        <nav id="sidebar">
            <div class="sidebar-header">                
                <h1 class="font-weight-light">Hierarchical ACORN analysis</h1>
            </div>

            <ul class="list-unstyled components">
                <li class="active">
                    <a href="#modelsSubmenu" data-toggle="collapse" 
                    aria-expanded="true" class="dropdown-toggle">Models</a>
                    <ul class="collapse list-unstyled" id="modelsSubmenu">
                        <li>
                            <a href="#">Home 1</a>
                        </li>
                        <li>
                            <a href="#">Home 2</a>
                        </li>
                        <li>
                            <a href="#">Home 3</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </nav>

        <!-- Page Content  -->
        <div id="content">

            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">

                    <button type="button" id="sidebarCollapse" class="btn btn-info">
                        <i class="fas fa-align-left"></i>
                        <span>Toggle Sidebar</span>
                    </button>
                    <button class="btn btn-dark d-inline-block d-lg-none ml-auto" 
                    type="button" data-toggle="collapse" data-target="#navbarSupportedContent" 
                    aria-controls="navbarSupportedContent" aria-expanded="false" 
                    aria-label="Toggle navigation">
                        <i class="fas fa-align-justify"></i>
                    </button>

                    
                </div>
            </nav>

            <div class="container-fluid">    
                <div class="row">
                    <div class="col-md-3">
                        <input type="range" class="form-range" id="block_zoom_slider" 
                        min="1" max="4" step="0.1" value="1">
                        <br>
                        <p><a id="psnr">PSNR: --</a>,<a id="l1"> L1: --</a></p>
                    </div>
                    <div class="col-md-3">

                    </div>
                    <div class="col-md-3">

                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3">
                        GT image
                        <img id='target_signal' 
                        class="img-fluid" alt=""
                        style="width:100%;height:100%;">
                    </div>
                    <div class="col-md-3">
                        Low-res image
                        <img id='reconstructed_signal' 
                        class="img-fluid" alt=""
                        style="width:100%;height:100%;">
                    </div>
                    <div class="col-md-3">
                        Super-resolved image
                        <img id='reconstructed_signal_blocks' 
                        class="img-fluid" alt=""
                        style="width:100%;height:100%;">
                    </div>
                </div>
                <br>
                <div class="row">
                    <div class="col-md-9">
                        
                    </div>
                </div>
                <br>
                <div class="row">
                    <div class="col-md-3">
                          
                    </div>
                    <div class="col-md-3">
                        
                    </div>
                    <div class="col-md-3">
                        Block zoom
                        <img id='block_zoom' 
                        class="img-fluid" alt=""
                        style="width:100%;height:100%;">
                    </div>
                </div>
            </div>

            </div>
    </div>

    <!-- jQuery CDN - Slim version (=without AJAX) -->
    <script src="/static/vendor/jquery/jquery.min.js"></script>
        <!-- Popper.JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $('#sidebarCollapse').on('click', function () {
                $('#sidebar').toggleClass('active');
            });
        });
    </script>
</body>

</html>